<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simply Redux</title>
</head>
<body>
    <section>
        <h2>Todos</h2>
        <form id="add-todo">
            <input name="todo" required />
            <button type="submit">Add To-Do</button>
        </form>
        <ul id="todos"></ul>
    </section>

    <section>
        <h2>Books</h2>
        <form id="add-book">
            <input name="book" required />
            <button type="submit">Add Book</button>
        </form>
        <ul id="books"></ul>
    </section>
    <script>
        // State section
        function createStore() {
            let state = {
                todos: [],
                books: [],
            };

            const addTodo = (text) => {
                const todo = {
                    id: Date.now(),
                    text,
                    completed: false,
                };
                state.todos.push(todo);
            };

            const deleteTodo = (id) => {
                state.todos = state.todos.filter((todo) => todo.id !== id);
            };

            const toggleTodo = (id) => {
                const todo = state.todos.find((todo) => todo.id === id);
                if (todo) {
                    todo.completed = !todo.completed
                }
            };

            const dispatch = (action) => {
                // call the right function to handle action
                if (action.type === 'add-todo') {
                    addTodo(action.text);
                }
            };

            return {
                dispatch
            };
        }

        const store = createStore();

        // UI section
        window.addEventListener('load', () => {
            const todoForm = document.getElementById('add-todo');

            todoForm.addEventListener('submit', (event) => {
                event.preventDefault();
                const todoInput = todoForm.elements.todo;
                const action = {
                    type: 'add-todo',
                    text: todoInput.value,
                };
                store.dispatch(action);
            });
        });
    </script>
</body>
</html>